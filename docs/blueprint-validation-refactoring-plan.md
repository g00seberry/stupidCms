# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ Blueprint

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–µ–¥–æ—á–µ—Ç—ã

### 1. –ú–∞—Å—Å–∏–≤–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –º–µ–∂–¥—É StoreEntryRequest –∏ UpdateEntryRequest

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–ª–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤:
- `buildDataTypesMapping()` - 45 —Å—Ç—Ä–æ–∫, –∏–¥–µ–Ω—Ç–∏—á–Ω—ã
- `buildFieldPathForMapping()` - 24 —Å—Ç—Ä–æ–∫–∏, –∏–¥–µ–Ω—Ç–∏—á–Ω—ã
- `addArrayRulesForManyFields()` - 35 —Å—Ç—Ä–æ–∫, –∏–¥–µ–Ω—Ç–∏—á–Ω—ã
- `ensureArrayRuleForJsonArrayElements()` - 25 —Å—Ç—Ä–æ–∫, –∏–¥–µ–Ω—Ç–∏—á–Ω—ã
- `addBlueprintValidationRules()` - 75 —Å—Ç—Ä–æ–∫, –ø–æ—á—Ç–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã (—Ä–∞–∑–Ω–∏—Ü–∞ —Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª—É—á–µ–Ω–∏–∏ PostType)

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: üî¥ –í—ã—Å–æ–∫–∞—è

**–†–µ—à–µ–Ω–∏–µ**: –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â—É—é –ª–æ–≥–∏–∫—É –≤ trait –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å.

---

### 2. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞ data_type ‚Üí Laravel –ø—Ä–∞–≤–∏–ª–æ

**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ—Ç–æ–¥ `getBaseTypeForDataType()` –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤:
- `BlueprintContentValidator::getBaseTypeForDataType()` (—Å—Ç—Ä–æ–∫–∏ 163-176)
- `LaravelValidationAdapter::getBaseTypeForDataType()` (—Å—Ç—Ä–æ–∫–∏ 235-248)

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: üü° –°—Ä–µ–¥–Ω—è—è

**–†–µ—à–µ–Ω–∏–µ**: –í—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å `DataTypeMapper` –∏–ª–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã.

---

### 3. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—É—Ç–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ—Ö–æ–∂–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è `full_path` –≤ —Ç–æ—á–µ—á–Ω—É—é –Ω–æ—Ç–∞—Ü–∏—é:
- `EntryValidationService::buildFieldPath()` (—Å—Ç—Ä–æ–∫–∏ 173-197)
- `StoreEntryRequest::buildFieldPathForMapping()` (—Å—Ç—Ä–æ–∫–∏ 277-301)
- `UpdateEntryRequest::buildFieldPathForMapping()` (—Å—Ç—Ä–æ–∫–∏ 334-358)

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: üü° –°—Ä–µ–¥–Ω—è—è

**–†–µ—à–µ–Ω–∏–µ**: –í—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å `FieldPathBuilder`.

---

### 4. –ò–∑–±—ã—Ç–æ—á–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å LaravelValidationAdapter::adapt()

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –ú–µ—Ç–æ–¥ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π (226 —Å—Ç—Ä–æ–∫)
- –ú–Ω–æ–≥–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ 'array' –ø—Ä–∞–≤–∏–ª–∞ (–¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è 3 —Ä–∞–∑–∞)
- –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—Å—Ç–∞–≤–∫–∏ –ø—Ä–∞–≤–∏–ª –≤ –º–∞—Å—Å–∏–≤

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: üü° –°—Ä–µ–¥–Ω—è—è

**–†–µ—à–µ–Ω–∏–µ**: –†–∞–∑–±–∏—Ç—å –Ω–∞ –º–µ–Ω—å—à–∏–µ –º–µ—Ç–æ–¥—ã, –≤—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã.

---

### 5. –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î

**–ü—Ä–æ–±–ª–µ–º–∞**: –í `addArrayRulesForManyFields()`:
```php
$paths = $blueprint->paths()
    ->select(['full_path', 'cardinality'])
    ->where('cardinality', 'many')
    ->get();

// –ü–æ—Ç–æ–º –µ—â—ë –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å:
foreach ($blueprint->paths()->select(['full_path', 'cardinality'])->get() as $path) {
    $pathCardinalities[$path->full_path] = $path->cardinality;
}
```

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: üü° –°—Ä–µ–¥–Ω—è—è

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∏ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

---

### 6. –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–≤—Å—é–¥—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–∞–≥–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏:
- `'required'`, `'nullable'`, `'array'`
- `'many'`, `'one'`
- `'content_json.'`

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: üü¢ –ù–∏–∑–∫–∞—è

**–†–µ—à–µ–Ω–∏–µ**: –í—ã–Ω–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–ª–∏ enum.

---

### 7. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤—Å—Ç–∞–≤–∫–∏ –ø—Ä–∞–≤–∏–ª

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ—Ö–æ–∂–∞—è –ª–æ–≥–∏–∫–∞ –≤—Å—Ç–∞–≤–∫–∏ –ø—Ä–∞–≤–∏–ª –≤ –º–∞—Å—Å–∏–≤:
- `BlueprintContentValidator::insertArrayRule()` (—Å—Ç—Ä–æ–∫–∏ 125-141)
- `LaravelValidationAdapter::insertBaseType()` (—Å—Ç—Ä–æ–∫–∏ 257-271)
- –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –≤ `LaravelValidationAdapter::adapt()` –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: üü° –°—Ä–µ–¥–Ω—è—è

**–†–µ—à–µ–Ω–∏–µ**: –í—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å `RuleArrayManipulator`.

---

### 8. –ù–∞—Ä—É—à–µ–Ω–∏–µ Single Responsibility –≤ Request –∫–ª–∞—Å—Å–∞—Ö

**–ü—Ä–æ–±–ª–µ–º–∞**: `StoreEntryRequest` –∏ `UpdateEntryRequest` —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–≥–∏–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ Blueprint (–±–æ–ª–µ–µ 200 —Å—Ç—Ä–æ–∫ –∫–∞–∂–¥—ã–π).

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: üü° –°—Ä–µ–¥–Ω—è—è

**–†–µ—à–µ–Ω–∏–µ**: –í—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å `BlueprintValidationRulesBuilder`.

---

## –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –≠—Ç–∞–ø 1: –í—ã–Ω–æ—Å –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏ –∏–∑ Request –∫–ª–∞—Å—Å–æ–≤ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í—ã—Å–æ–∫–∏–π)

#### 1.1. –°–æ–∑–¥–∞—Ç—å trait `BlueprintValidationTrait`

**–§–∞–π–ª**: `app/Http/Requests/Admin/Concerns/BlueprintValidationTrait.php`

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ**:
- `buildDataTypesMapping()`
- `buildFieldPathForMapping()`
- `addArrayRulesForManyFields()`
- `ensureArrayRuleForJsonArrayElements()`
- `addBlueprintValidationRules()` (—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è PostType)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –£—Å—Ç—Ä–∞–Ω—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É StoreEntryRequest –∏ UpdateEntryRequest
- –£–ø—Ä–æ—â–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É

---

#### 1.2. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `FieldPathBuilder`

**–§–∞–π–ª**: `app/Domain/Blueprint/Validation/FieldPathBuilder.php`

**–ú–µ—Ç–æ–¥—ã**:
- `buildFieldPath(string $fullPath, array $pathCardinalities, string $prefix = 'content_json'): string`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –ø—É—Ç–µ–π
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –£—Å—Ç—Ä–∞–Ω—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

---

#### 1.3. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `DataTypeMapper`

**–§–∞–π–ª**: `app/Domain/Blueprint/Validation/DataTypeMapper.php`

**–ú–µ—Ç–æ–¥—ã**:
- `toLaravelRule(string $dataType): ?string`
- `isArrayType(string $dataType): bool`
- `isJsonType(string $dataType): bool`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ —Ç–∏–ø–æ–≤
- –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å
- –£—Å—Ç—Ä–∞–Ω—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### –≠—Ç–∞–ø 2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ LaravelValidationAdapter (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π)

#### 2.1. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `RuleArrayManipulator`

**–§–∞–π–ª**: `app/Domain/Blueprint/Validation/RuleArrayManipulator.php`

**–ú–µ—Ç–æ–¥—ã**:
- `insertAfterRequired(array &$rules, string $ruleToInsert): void`
- `ensureArrayRule(array &$rules): void`
- `mergeRules(array $existing, array $new): array`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Å –º–∞—Å—Å–∏–≤–∞–º–∏
- –£–ø—Ä–æ—â–∞–µ—Ç `LaravelValidationAdapter`

---

#### 2.2. –†–∞–∑–±–∏—Ç—å `LaravelValidationAdapter::adapt()` –Ω–∞ –º–µ–Ω—å—à–∏–µ –º–µ—Ç–æ–¥—ã

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:
- `adapt()` - –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä)
- `processArrayElementFields()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–æ–≤
- `processRuleSet()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ RuleSet
- `addBaseTypes()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö —Ç–∏–ø–æ–≤
- `ensureArrayRulesForJsonElements()` - –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ array –ø—Ä–∞–≤–∏–ª

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –£–ª—É—á—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å
- –£–ø—Ä–æ—â–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –£–ø—Ä–æ—â–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É

---

### –≠—Ç–∞–ø 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π)

#### 3.1. –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å paths –≤ –º–µ—Ç–æ–¥–µ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –ó–∞–≥—Ä—É–∂–∞—Ç—å –≤—Å–µ paths –æ–¥–∏–Ω —Ä–∞–∑
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –º–µ—Ç–æ–¥–∞—Ö

**–ü—Ä–∏–º–µ—Ä**:
```php
private function addArrayRulesForManyFields(array &$laravelRules, Blueprint $blueprint, array $pathCardinalities): void
{
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ paths
    $paths = $blueprint->paths()
        ->select(['full_path', 'cardinality'])
        ->where('cardinality', 'many')
        ->get();
    // ...
}
```

---

### –≠—Ç–∞–ø 4: –í—ã–Ω–æ—Å –∫–æ–Ω—Å—Ç–∞–Ω—Ç (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–∏–∑–∫–∏–π)

#### 4.1. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `ValidationConstants`

**–§–∞–π–ª**: `app/Domain/Blueprint/Validation/ValidationConstants.php`

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã**:
```php
final class ValidationConstants
{
    public const RULE_REQUIRED = 'required';
    public const RULE_NULLABLE = 'nullable';
    public const RULE_ARRAY = 'array';
    
    public const CARDINALITY_ONE = 'one';
    public const CARDINALITY_MANY = 'many';
    
    public const CONTENT_JSON_PREFIX = 'content_json.';
    
    public const ARRAY_ELEMENT_WILDCARD = '.*';
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –£—Å—Ç—Ä–∞–Ω—è–µ—Ç –º–∞–≥–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏
- –£–ø—Ä–æ—â–∞–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- –£–ª—É—á—à–∞–µ—Ç IDE –ø–æ–¥–¥–µ—Ä–∂–∫—É

---

### –≠—Ç–∞–ø 5: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π)

#### 5.1. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `BlueprintValidationRulesBuilder`

**–§–∞–π–ª**: `app/Domain/Blueprint/Validation/BlueprintValidationRulesBuilder.php`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**:
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª—è Request –∫–ª–∞—Å—Å–æ–≤
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

**–ú–µ—Ç–æ–¥—ã**:
- `buildForRequest(Blueprint $blueprint, ?PostType $postType = null): array`
- `buildDataTypesMapping(Blueprint $blueprint): array`
- `addArrayRules(array &$rules, Blueprint $blueprint): void`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –£–ø—Ä–æ—â–∞–µ—Ç Request –∫–ª–∞—Å—Å—ã
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑—É–µ—Ç –ª–æ–≥–∏–∫—É
- –£–ª—É—á—à–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å

---

## –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `FieldPathBuilder`
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å `DataTypeMapper`
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å `ValidationConstants`
4. ‚úÖ –°–æ–∑–¥–∞—Ç—å `RuleArrayManipulator`

### –®–∞–≥ 2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ Request –∫–ª–∞—Å—Å–æ–≤

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `BlueprintValidationTrait`
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å trait –≤ `StoreEntryRequest`
3. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å trait –≤ `UpdateEntryRequest`
4. ‚úÖ –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥

### –®–∞–≥ 3: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ LaravelValidationAdapter

1. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DataTypeMapper`
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `RuleArrayManipulator`
3. ‚úÖ –†–∞–∑–±–∏—Ç—å `adapt()` –Ω–∞ –º–µ–Ω—å—à–∏–µ –º–µ—Ç–æ–¥—ã
4. ‚úÖ –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É

### –®–∞–≥ 4: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ EntryValidationService

1. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `FieldPathBuilder`
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ValidationConstants`

### –®–∞–≥ 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

### –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

---

## –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

- **–≠—Ç–∞–ø 1**: 4-6 —á–∞—Å–æ–≤
- **–≠—Ç–∞–ø 2**: 3-4 —á–∞—Å–∞
- **–≠—Ç–∞–ø 3**: 1-2 —á–∞—Å–∞
- **–≠—Ç–∞–ø 4**: 1 —á–∞—Å
- **–≠—Ç–∞–ø 5**: 2-3 —á–∞—Å–∞
- **–≠—Ç–∞–ø 6**: 2-3 —á–∞—Å–∞

**–ò—Ç–æ–≥–æ**: 13-19 —á–∞—Å–æ–≤

---

## –†–∏—Å–∫–∏

1. **Breaking changes**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã
   - **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –¢—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ù–æ–≤—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –º–æ–≥—É—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å –∫–æ–¥
   - **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≥–æ—Ä—è—á–∏—Ö –ø—É—Ç–µ–π

3. **–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –ù–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –º–æ–≥—É—Ç —É—Å–ª–æ–∂–Ω–∏—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
   - **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

1. ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ 100% –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ–∂–¥—É Request –∫–ª–∞—Å—Å–∞–º–∏
2. ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞ data_type
3. ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—É—Ç–µ–π
4. ‚úÖ `LaravelValidationAdapter::adapt()` —Ä–∞–∑–±–∏—Ç –Ω–∞ –º–µ—Ç–æ–¥—ã < 50 —Å—Ç—Ä–æ–∫
5. ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
6. ‚úÖ –í—Å–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
7. ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ >= 90%

---

## –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è

### –ö—Ä–∏—Ç–∏—á–Ω–æ (—Å–¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å):
1. –í—ã–Ω–æ—Å –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏ –∏–∑ Request –∫–ª–∞—Å—Å–æ–≤ (–≠—Ç–∞–ø 1)
2. –°–æ–∑–¥–∞–Ω–∏–µ `FieldPathBuilder` (–≠—Ç–∞–ø 1.2)
3. –°–æ–∑–¥–∞–Ω–∏–µ `DataTypeMapper` (–≠—Ç–∞–ø 1.3)

### –í–∞–∂–Ω–æ (—Å–¥–µ–ª–∞—Ç—å –≤–æ –≤—Ç–æ—Ä—É—é –æ—á–µ—Ä–µ–¥—å):
4. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `LaravelValidationAdapter` (–≠—Ç–∞–ø 2)
5. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î (–≠—Ç–∞–ø 3)

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å):
6. –í—ã–Ω–æ—Å –∫–æ–Ω—Å—Ç–∞–Ω—Ç (–≠—Ç–∞–ø 4)
7. –°–æ–∑–¥–∞–Ω–∏–µ `BlueprintValidationRulesBuilder` (–≠—Ç–∞–ø 5)

---

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –î–æ (StoreEntryRequest):
```php
private function buildDataTypesMapping(Blueprint $blueprint): array
{
    // 45 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
}

private function buildFieldPathForMapping(string $fullPath, array $pathCardinalities): string
{
    // 24 —Å—Ç—Ä–æ–∫–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
}
```

### –ü–æ—Å–ª–µ (StoreEntryRequest —Å trait):
```php
use App\Http\Requests\Admin\Concerns\BlueprintValidationTrait;

class StoreEntryRequest extends FormRequest
{
    use BlueprintValidationTrait;
    
    // –¢–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –¥–ª—è StoreEntryRequest –ª–æ–≥–∏–∫–∞
}
```

### –î–æ (LaravelValidationAdapter):
```php
private function getBaseTypeForDataType(string $dataType): ?string
{
    return match ($dataType) {
        'string', 'text' => 'string',
        // ... 10 —Å—Ç—Ä–æ–∫
    };
}
```

### –ü–æ—Å–ª–µ (LaravelValidationAdapter —Å DataTypeMapper):
```php
public function __construct(
    private readonly RuleHandlerRegistry $registry,
    private readonly DataTypeMapper $dataTypeMapper
) {}

private function getBaseTypeForDataType(string $dataType): ?string
{
    return $this->dataTypeMapper->toLaravelRule($dataType);
}
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–∞–Ω–∏—Ç:
- ‚úÖ ~200 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ 2 –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–∞ –º–∞–ø–ø–∏–Ω–≥–∞ —Ç–∏–ø–æ–≤
- ‚úÖ 3 –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—É—Ç–µ–π
- ‚úÖ –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
- ‚úÖ –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏
- ‚úÖ –°–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –≤ –±–æ–ª—å—à–∏—Ö –º–µ—Ç–æ–¥–∞—Ö

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å
- ‚úÖ –£–ø—Ä–æ—â—ë–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ú–µ–Ω—å—à–µ –±–∞–≥–æ–≤

